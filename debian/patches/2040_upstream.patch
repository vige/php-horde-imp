From 58f5d9f45c67c77e749caa8b7e8ad325c7b9bc43 Mon Sep 17 00:00:00 2001
From: Michael J Rubinsky <mrubinsk@horde.org>
Date: Mon, 31 Oct 2022 23:28:41 -0400
Subject: [PATCH] Avoid access array offset errors

---
 lib/Contents.php | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: php-horde-imp/imp-6.2.27/lib/Contents.php
===================================================================
--- php-horde-imp.orig/imp-6.2.27/lib/Contents.php
+++ php-horde-imp/imp-6.2.27/lib/Contents.php
@@ -665,7 +665,7 @@ class IMP_Contents
 
         /* Don't show empty parts. */
         if (($textmode == 'inline') &&
-            !is_null($ret[$mime_id]['data']) &&
+            !empty($ret[$mime_id]) && !is_null($ret[$mime_id]['data']) &&
             !strlen($ret[$mime_id]['data']) &&
             !isset($ret[$mime_id]['status'])) {
             $ret[$mime_id] = null;
