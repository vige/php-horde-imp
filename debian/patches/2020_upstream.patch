From bbe083dca2e2ab6f465287bb999e9b44c2c5691b Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=D0=94=D0=B8=D0=BB=D1=8F=D0=BD=20=D0=9F=D0=B0=D0=BB=D0=B0?=
 =?UTF-8?q?=D1=83=D0=B7=D0=BE=D0=B2?= <git-dpa@aegee.org>
Date: Mon, 13 Jun 2022 12:11:30 +0300
Subject: [PATCH] MIME: Do case-insesitive parsing of format=Flowed

---
 lib/Mime/Viewer/Plain.php | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: php-horde-imp/imp-6.2.27/lib/Mime/Viewer/Plain.php
===================================================================
--- php-horde-imp.orig/imp-6.2.27/lib/Mime/Viewer/Plain.php
+++ php-horde-imp/imp-6.2.27/lib/Mime/Viewer/Plain.php
@@ -87,7 +87,7 @@ class IMP_Mime_Viewer_Plain extends Hord
         $type = 'text/html; charset=' . $charset;
 
         // Check for 'flowed' text data.
-        if ($this->_mimepart->getContentTypeParameter('format') == 'flowed') {
+        if (strcasecmp($this->_mimepart->getContentTypeParameter('format'), 'flowed') == 0) {
             $text = $this->_formatFlowed($text, $this->_mimepart->getContentTypeParameter('delsp'));
         } else {
             /* A "From" located at the beginning of a line in the body text
